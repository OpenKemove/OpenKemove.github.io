<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>install - Open Kemove</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>install | Open Kemove</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="install" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation site for Open Kemove, the QMK port for Kemove Snowfox and many others." /> <meta property="og:description" content="Documentation site for Open Kemove, the QMK port for Kemove Snowfox and many others." /> <link rel="canonical" href="https://openkemove.github.io/install/install.html" /> <meta property="og:url" content="https://openkemove.github.io/install/install.html" /> <meta property="og:site_name" content="Open Kemove" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="install" /> <script type="application/ld+json"> {"description":"Documentation site for Open Kemove, the QMK port for Kemove Snowfox and many others.","url":"https://openkemove.github.io/install/install.html","@type":"WebPage","headline":"install","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://openkemove.github.io/" class="site-title lh-tight"> Open Kemove </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://openkemove.github.io/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="https://openkemove.github.io/install/theory.html" class="nav-list-link">How it all works</a></li><li class="nav-list-item active"><a href="https://openkemove.github.io/install/install.html" class="nav-list-link active">install</a></li><li class="nav-list-item"><a href="https://openkemove.github.io/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Open Kemove" aria-label="Search Open Kemove" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="how-to-install"> <a href="#how-to-install" class="anchor-heading" aria-labelledby="how-to-install"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to install </h1> <h2 id="before-you-begin"> <a href="#before-you-begin" class="anchor-heading" aria-labelledby="before-you-begin"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Before you begin </h2> <p><strong>Check your keyboard’s PCB version.</strong> The current version of Open Kemove only supports keyboards featuring PCB revision 3.0. If you have 1.2 or 1.5, we are working on a port for you (more info about this on our <a href="https://discord.gg/TFeG4cb3yk">Discord server</a>). To check which version you have, disassemble your keyboard and examine the lower part of the PCB</p> <details> <p><img src="/install/pcb_revision_3.jpg" alt="" /></p> </details> <p><strong>Have a backup keyboard available.</strong> During the disassembly and flashing procedures, you will need to input some keystrokes. Even though an on-screen keyboard will make do, we do not recommend it :D</p> <p><strong>Follow these steps carefully.</strong> Make sure to not skip the step for backing up the original firmware, in case you need to recover your keyboard to its original state.</p> <p><strong>Understand how it works.</strong> Please review the <a href="/install/theory.html">How it all works</a> page. In the off chance that things go wrong, at least you will know what to google and how to ask for help. The <a href="https://discord.gg/TFeG4cb3yk">Discord server</a> is a great place to ask for support, as people are always helpful there.</p> <h2 id="step-1-set-up-your-environment"> <a href="#step-1-set-up-your-environment" class="anchor-heading" aria-labelledby="step-1-set-up-your-environment"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1: Set up your environment </h2> <p>We will assume you have Windows 10 and have WSL or WSL2 installed. If not please install that. We will have tags that explain what you need to do differently for certain sections of the instruction.</p> <h3 id="arm-gcc-compiler--toolchain"> <a href="#arm-gcc-compiler--toolchain" class="anchor-heading" aria-labelledby="arm-gcc-compiler--toolchain"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ARM GCC Compiler / Toolchain </h3> <p>This is often a package in your package manager. On Ubuntu this can be done using</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>gcc-arm-none-eabi binutils-arm-none-eabi make
</code></pre></div></div> <h3 id="git"> <a href="#git" class="anchor-heading" aria-labelledby="git"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Git </h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>git
</code></pre></div></div> <h3 id="dfu-tools"> <a href="#dfu-tools" class="anchor-heading" aria-labelledby="dfu-tools"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> DFU-Tools </h3> <p>For linux users, we strongly recommend the <code class="language-plaintext highlighter-rouge">dfu-util</code> tool to flash the firmware. If you run into permission problems you can always create udev rules, or simply run the tool using sudo.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>dfu-util
</code></pre></div></div> <p><strong>NOTE: Do not run this under WSL it will not work. WSL has no USB support as of 2020</strong></p> <h2 id="step-2-get-the-bootloader"> <a href="#step-2-get-the-bootloader" class="anchor-heading" aria-labelledby="step-2-get-the-bootloader"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2: Get the bootloader </h2> <p>Simply download the version matching your PCB revision from:</p> <p><a href="https://ci.codetector.org/job/OpenKemove/job/kemove_lpc_dfu/job/master/">Jenkins CI Server</a> Download the <code class="language-plaintext highlighter-rouge">lpc_boot_Vxx.bin</code> where xx is your version. For example 1.5 would be 1_5.</p> <p><strong>OR You can build the bootloader yourself</strong></p> <details> <h3 id="clone-bootloader-repository"> <a href="#clone-bootloader-repository" class="anchor-heading" aria-labelledby="clone-bootloader-repository"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Clone bootloader repository </h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/OpenKemove/kemove_lpc_dfu.git <span class="nt">--recursive</span> <span class="nt">--depth</span><span class="o">=</span>1
</code></pre></div> </div> <p><code class="language-plaintext highlighter-rouge">recursive</code> here will tell git to clone all submodules.</p> <p><code class="language-plaintext highlighter-rouge">depth=1</code> will tell git to not clone history. You can omit this if you planning on developing the firmware.</p> <h3 id="compile-bootloader"> <a href="#compile-bootloader" class="anchor-heading" aria-labelledby="compile-bootloader"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Compile bootloader </h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>kemove_lpc_dfu
make
</code></pre></div> </div> <p>Yep, that’s it. simple. Hopefully it has successfully built with no errors. You should see a few files under build. Namely <code class="language-plaintext highlighter-rouge">lpc_boot_v3/v1_5.bin</code></p> </details> <h2 id="step-3-build-qmk-firmware"> <a href="#step-3-build-qmk-firmware" class="anchor-heading" aria-labelledby="step-3-build-qmk-firmware"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3: Build QMK firmware </h2> <h3 id="clone-our-qmk-fork"> <a href="#clone-our-qmk-fork" class="anchor-heading" aria-labelledby="clone-our-qmk-fork"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Clone our QMK Fork </h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/OpenKemove/qmk_firmware.git <span class="nt">--recursive</span> <span class="nt">--depth</span><span class="o">=</span>1
</code></pre></div></div> <h3 id="compile-qmk"> <a href="#compile-qmk" class="anchor-heading" aria-labelledby="compile-qmk"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Compile QMK </h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>qmk_firmware
make kemove/snowfox/v3
</code></pre></div></div> <p>If you have 1.5 please replace <code class="language-plaintext highlighter-rouge">v3</code> with <code class="language-plaintext highlighter-rouge">v1_5</code></p> <p>Once this is done, you should see a <code class="language-plaintext highlighter-rouge">kemove_snowfox_vxx_default.bin</code> in the directory.</p> <h2 id="step-4-disassemble-your-keyboard"> <a href="#step-4-disassemble-your-keyboard" class="anchor-heading" aria-labelledby="step-4-disassemble-your-keyboard"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 4: Disassemble your keyboard </h2> <p>With your keyboard disconnected from the computer, remove all keycaps and switches using the pullers provided by Kemove.</p> <p>You will also need to remove the 7 screws fixing the PCB to the keyboard’s case. These screws have soft heads, so use an adequate sized phillips screwdriver, otherwise you may end up with very difficult to remove dusted screws.</p> <p>When lifting the PCB from the case, gently detach the wire connecting the battery to the back of the PCB. You will have a bare board like the one below.</p> <p><img src="pcb_revision_3.jpg" alt="Bare PCB" /></p> <h2 id="step-5-connect-the-pcb-in-flash-drive-mode"> <a href="#step-5-connect-the-pcb-in-flash-drive-mode" class="anchor-heading" aria-labelledby="step-5-connect-the-pcb-in-flash-drive-mode"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 5: Connect the PCB in flash drive mode </h2> <p>To execute this step you will need to close a circuit in your PCB using either a resistor (100-1K Ohm is better), a wire or a paper clip, so gather one of these tools.</p> <p>Looking at the PCB’s front (the side that swiches would be installed onto), you will find some exposed metal contacts. These are called test points. First locate a test point with the <code class="language-plaintext highlighter-rouge">ISP</code> description next to it. Then locate the test points with the <code class="language-plaintext highlighter-rouge">GNDx</code> description (where <code class="language-plaintext highlighter-rouge">x</code> could be any number).</p> <p>Next, using your resistor, wire or paper clip, connect the <code class="language-plaintext highlighter-rouge">ISP</code> metal contact to any one of the <code class="language-plaintext highlighter-rouge">GNDx</code> contacts. While holding this connection, plugin the PCB to a computer using the keyboard’s USB cable. If you did everything correctly, a new “flash drive” should show up on the computer (and you can drop the wire contacts). Otherwise, you probably did not connect the <code class="language-plaintext highlighter-rouge">ISP</code> and <code class="language-plaintext highlighter-rouge">GNDx</code> pads properly, so please try again.</p> <p>Below is an example of a rudimentary paper clip connection closing the circuit between the <code class="language-plaintext highlighter-rouge">ISP</code> and <code class="language-plaintext highlighter-rouge">GND2</code> test points.</p> <p><img src="paper_clip_connection.jpg" alt="Closing the circuit with a rudimentary paper clip connection" /></p> <h2 id="step-6-backup-original-firmware-and-place-bootloader"> <a href="#step-6-backup-original-firmware-and-place-bootloader" class="anchor-heading" aria-labelledby="step-6-backup-original-firmware-and-place-bootloader"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 6: Backup original firmware and place bootloader </h2> <blockquote> <p><strong>Attention Linux users:</strong> This step might require using a Windows machine or VM, or MacOS, as it often have problems on Linux. But feel free to also try the MacOS steps at the end of this section.</p> </blockquote> <p>With the PCB connected as a “flash drive”, open it in Explorer and locate the <code class="language-plaintext highlighter-rouge">firmware.bin</code> file. This is the original firmware provided by Kemove and it should be 64 KB in size. Copy this file to a safe place in your computer, as you will revert to this backup in case anything goes wrong during the flashing procedure.</p> <p>After certifying that you backed up the original firmware, delete the <code class="language-plaintext highlighter-rouge">firmware.bin</code> file from the “flash drive”. Then copy the <code class="language-plaintext highlighter-rouge">lpc_boot.bin</code> bootloader file that you compiled in step 1 to the “flash drive”. There is no need to rename it.</p> <p>Once you are done with that, unplug the PCB from the computer. Place a single switch in the <code class="language-plaintext highlighter-rouge">ESC</code> key slot and hold it down while replugging the board to the computer. This will trigger <em>Device Firmware Upgrade</em> (DFU) mode and, if you check your computer’s <code class="language-plaintext highlighter-rouge">Device Manager</code>/<code class="language-plaintext highlighter-rouge">lsusb</code>, you should see a new <code class="language-plaintext highlighter-rouge">DFU</code> device in there.</p> <h3 id="instructions-for-macos-users"> <a href="#instructions-for-macos-users" class="anchor-heading" aria-labelledby="instructions-for-macos-users"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Instructions for MacOS users </h3> <p>Please <strong>DO NOT</strong> open the flash drive in Finder. Instead, complete the operation using the command line interface. You can do this with the following steps:</p> <ol> <li>Wait for the drive icon to show up in desktop.</li> <li>Open a terminal</li> <li><code class="language-plaintext highlighter-rouge">cd </code> (space after <code class="language-plaintext highlighter-rouge">cd</code>) then drag the drive icon into your terminal. It should fill in the path. Then press enter.</li> <li> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> firmware.bin
<span class="nb">sync</span>
</code></pre></div> </div> </li> <li><code class="language-plaintext highlighter-rouge">cp PATH_TO_LPC_BOOT.BIN .</code> (You can do the drag and drop thing as well for <code class="language-plaintext highlighter-rouge">lpc_boot.bin</code>)</li> <li><code class="language-plaintext highlighter-rouge">sync</code></li> <li><code class="language-plaintext highlighter-rouge">diskutil list</code>, then find the diskX where X is a number which contains the flash drive.</li> <li><code class="language-plaintext highlighter-rouge">diskutil unmountDisk diskX</code> this is the diskX you found in the previous step.</li> </ol> <h2 id="step-7-flash-qmk"> <a href="#step-7-flash-qmk" class="anchor-heading" aria-labelledby="step-7-flash-qmk"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 7: Flash QMK! </h2> <p>Now we can use dfu-util to flash the device. Run <code class="language-plaintext highlighter-rouge">dfu-util</code> in the <code class="language-plaintext highlighter-rouge">qmk_firmware</code> directory. Make sure it can detect the device. You can verify this by running. Check for the pair <em>feed:6969</em>.</p> <p><strong>Note: Windows Users</strong> Please follow <a href="https://www.hanselman.com/blog/how-to-fix-dfuutil-stm-winusb-zadig-bootloaders-and-other-firmware-flashing-issues-on-windows">This Guide</a> on how to install the generic libusb driver</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dfu-util <span class="nt">-l</span>
</code></pre></div></div> <p>you should see something like this:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dfu-util 0.9

Copyright 2005-2009 Weston Schmidt, Harald Welte and OpenMoko Inc.
Copyright 2010-2016 Tormod Volden and Stefan Schmidt
This program is Free Software and has ABSOLUTELY NO WARRANTY
Please report bugs to http://sourceforge.net/p/dfu-util/tickets/

Found DFU: <span class="o">[</span>feed:6969] <span class="nv">ver</span><span class="o">=</span>0200, <span class="nv">devnum</span><span class="o">=</span>4, <span class="nv">cfg</span><span class="o">=</span>1, <span class="nv">intf</span><span class="o">=</span>0, <span class="nv">path</span><span class="o">=</span><span class="s2">"1-12"</span>, <span class="nv">alt</span><span class="o">=</span>0, <span class="nv">name</span><span class="o">=</span><span class="s2">"UNKNOWN"</span>, <span class="nv">serial</span><span class="o">=</span><span class="s2">"604"</span>
</code></pre></div></div> <p>Then you can flash the firmware by using</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dfu-util <span class="nt">-d</span> feed:6969 <span class="nt">-D</span> kemove_snowfox_vxx_default.bin
</code></pre></div></div> <p>If you run into any error, please try connecting the keyboard directly to the computer without any HUB etc. Or just try a few times. Remeber to unplug / replug (while holding esc) between tries.</p> <p>Once it is done, you board should be running QMK. (you might need to unplug / replug) for it to boot QMK. The auto boot works most of the time but occasionally seems buggy.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
