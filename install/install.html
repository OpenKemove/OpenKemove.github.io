<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>How to Install - Open Kemove</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>How to Install | Open Kemove</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="How to Install" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation site for Open Kemove, the QMK port for Kemove Snowfox and many others." /> <meta property="og:description" content="Documentation site for Open Kemove, the QMK port for Kemove Snowfox and many others." /> <link rel="canonical" href="https://openkemove.github.io/install/install.html" /> <meta property="og:url" content="https://openkemove.github.io/install/install.html" /> <meta property="og:site_name" content="Open Kemove" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="How to Install" /> <script type="application/ld+json"> {"headline":"How to Install","description":"Documentation site for Open Kemove, the QMK port for Kemove Snowfox and many others.","url":"https://openkemove.github.io/install/install.html","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://openkemove.github.io/" class="site-title lh-tight"> Open Kemove </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://openkemove.github.io/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="https://openkemove.github.io/install/theory.html" class="nav-list-link">How it all works</a></li><li class="nav-list-item active"><a href="https://openkemove.github.io/install/install.html" class="nav-list-link active">How to Install</a></li><li class="nav-list-item"><a href="https://openkemove.github.io/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Open Kemove" aria-label="Search Open Kemove" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="how-to-install"> <a href="#how-to-install" class="anchor-heading" aria-labelledby="how-to-install"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to install </h1> <p><strong>Please follow the steps carefully. Make sure you keep the backup of the original firmware in a safe place in case you need to perform a recovery.</strong></p> <p><strong>Current QMK only works for PCB revision 3.0, if you have 1.2 please wait as we are working on a port for you. Please join the discord for more info on this</strong></p> <h1 id="understanding-how-it-works"> <a href="#understanding-how-it-works" class="anchor-heading" aria-labelledby="understanding-how-it-works"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Understanding how it works </h1> <p>Before we begin, I would like to explain how this works in general. So in the off chace that things go wrong, you at least know what to google or how to ask for help.</p> <p>Please review the <a href="/install/theory.html">How it all works</a> page.</p> <p>Of course the discord server is always a great place to ask for help or just have any kind of general question. People are always helpful there. <a href="https://discord.gg/TFeG4cb3yk">Open Kemove Discord Server</a></p> <h1 id="step-0-gather-files"> <a href="#step-0-gather-files" class="anchor-heading" aria-labelledby="step-0-gather-files"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 0: Gather Files </h1> <details> <summary>Windows</summary> We will assume you have Windows 10 and have WSL or WSL2 installed. If not please install that. We will have tags that explain what you need to do differently for certain sections of the instruction. </details> <h2 id="arm-gcc-compiler--toolchain"> <a href="#arm-gcc-compiler--toolchain" class="anchor-heading" aria-labelledby="arm-gcc-compiler--toolchain"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ARM GCC Compiler / Toolchain </h2> <p>This is often a package in your package manager. On Ubuntu this can be done using</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>gcc-arm-none-eabi binutils-arm-none-eabi make
</code></pre></div></div> <h2 id="git"> <a href="#git" class="anchor-heading" aria-labelledby="git"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Git </h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>git
</code></pre></div></div> <h2 id="dfu-tools"> <a href="#dfu-tools" class="anchor-heading" aria-labelledby="dfu-tools"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> DFU-Tools </h2> <p>For linux users, we strongly recommend the <code class="language-plaintext highlighter-rouge">dfu-util</code> tool to flash the firmware. If you run into permission problems you can always create udev rules, or simply run the tool using sudo.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>dfu-util
</code></pre></div></div> <p><strong>NOTE: Do not run this under WSL it will not work. WSL has no USB support as of 2020</strong></p> <h1 id="step-1-get-and-build-bootloader"> <a href="#step-1-get-and-build-bootloader" class="anchor-heading" aria-labelledby="step-1-get-and-build-bootloader"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1: Get and Build bootloader </h1> <ol> <li>Clone the bootloader repository.</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/OpenKemove/kemove_lpc_dfu.git <span class="nt">--recursive</span> <span class="nt">--depth</span><span class="o">=</span>1
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">recursive</code> here will tell git to clone all submodules.</p> <p><code class="language-plaintext highlighter-rouge">depth=1</code> will tell git to not clone history. You can omit this if you planning on developing the firmware.</p> <ol> <li>Build the bootloader firmware <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>kemove_lpc_dfu
make
</code></pre></div> </div> </li> </ol> <p>** OR You can download a pre-built binary ** <a href="https://ci.codetector.org/job/OpenKemove/job/kemove_lpc_dfu/job/master/">Automatic Build System</a> Download the <code class="language-plaintext highlighter-rouge">lpc_boot.bin</code></p> <p>Yep, that’s it. simple. Hopefully it has successfully built with no errors. You should see a few files under build. Most imporantly you see the <code class="language-plaintext highlighter-rouge">lpc_boot.bin</code></p> <h1 id="step-2-build-qmk"> <a href="#step-2-build-qmk" class="anchor-heading" aria-labelledby="step-2-build-qmk"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2: Build QMK </h1> <ol> <li>Clone our QMK Fork <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/OpenKemove/qmk_firmware.git <span class="nt">--recursive</span> <span class="nt">--depth</span><span class="o">=</span>1
</code></pre></div> </div> </li> <li>Build QMK <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>qmk_firmware
make kemove/snowfox
</code></pre></div> </div> <p>Once this is done, you should see a <code class="language-plaintext highlighter-rouge">kemove_snowfox_default.bin</code> in the directory.</p> </li> </ol> <h1 id="step-3-backup"> <a href="#step-3-backup" class="anchor-heading" aria-labelledby="step-3-backup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3: Backup! </h1> <p>** WARNING **</p> <blockquote> <p>This step might require Windows / macOS. It seem to often have problem on Linux. Feel free to try, (and reference the macOS steps). If you have problems, try use a Windows VM or a Windows machine.</p> </blockquote> <p>Let’s start by taking a backup of the existing firmware. To do this, you will need to remove the PCB from the keyboard body and all the switches. Once you are done you should be left with a bare PCB. On the front side (Side that switches would be installed onto), you should be able to find some exposed metal contacts (These are called test points, used for testing). What you want to do is find a resistor (100-1K Ohm will work). (If you can’t find a resistor a wire or paper clip could work too but not ideal.)</p> <p>Since you should alreay have the battey detached, the keyboard should have no power unless we plug in the cable.</p> <p>You want to find the test point that says <code class="language-plaintext highlighter-rouge">ISP</code> next to it. Then you will need to find another test point that says <code class="language-plaintext highlighter-rouge">GNDx</code> (x here could be any number). Any ground pad could work. You will connect the <code class="language-plaintext highlighter-rouge">ISP</code> point and <code class="language-plaintext highlighter-rouge">GND</code> with your resistor/wire, then plugin the keyboard. You can remove the wire after you plug in. You should see a new “flash drive” show up on your computer. Open it, you can see the <code class="language-plaintext highlighter-rouge">firmware.bin</code> file. Copy it to a safe place, it should be exactally <code class="language-plaintext highlighter-rouge">64 KB</code> in size. (This might vary depending on how Windows / macOS / Linux round file size differently.) This is your backup of the old firmware. Once this is done, you can <code class="language-plaintext highlighter-rouge">DELETE</code> this file from the “flash drive”. Then you can copy the bootloader (<code class="language-plaintext highlighter-rouge">lpc_boot.bin</code>) into the “flash drive”. You do not need to rename it.</p> <p>Once you are done with that, unplug the keyboard, and replug while holding the <code class="language-plaintext highlighter-rouge">ESC</code> key. This is the key that will trigger the DFU mode in the future. You should see a new device pop up in lsusb / device manager. It should be <code class="language-plaintext highlighter-rouge">OpenKemove DFU</code></p> <p>** NOTE: macOS ** For macOS users, please <strong>DO NOT</strong> open the flash drive in Finder. Instead please complete the operation using command line interface. You can do this with the following steps:</p> <ol> <li>Wait for the drive icon to show up in desktop.</li> <li>Open a termial</li> <li><code class="language-plaintext highlighter-rouge">cd </code> (space after <code class="language-plaintext highlighter-rouge">cd</code>) then drag the drive icon into your terminal. It should fill in the path. Then press enter.</li> <li> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> firmware.bin
<span class="nb">sync</span>
</code></pre></div> </div> </li> <li><code class="language-plaintext highlighter-rouge">cp PATH_TO_LPC_BOOT.BIN .</code> (You can do the drag thing as well for <code class="language-plaintext highlighter-rouge">lpc_boot.bin</code>)</li> <li><code class="language-plaintext highlighter-rouge">sync</code></li> <li><code class="language-plaintext highlighter-rouge">diskutil list</code>, then find the diskX where X is a number which contains the flash drive.</li> <li><code class="language-plaintext highlighter-rouge">diskutil unmountDisk diskX</code> this is the diskX you found in the previous step.</li> </ol> <h1 id="step-4-flash-qmk"> <a href="#step-4-flash-qmk" class="anchor-heading" aria-labelledby="step-4-flash-qmk"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 4: Flash QMK! </h1> <p>Now we can use dfu-util to flash the device. Run <code class="language-plaintext highlighter-rouge">dfu-util</code> in the <code class="language-plaintext highlighter-rouge">qmk_firmware</code> directory. Make sure it can detect the device. You can verify this by running. Check for the pair <em>feed:6969</em>.</p> <p><strong>Note: Windows Users</strong> Please follow <a href="https://www.hanselman.com/blog/how-to-fix-dfuutil-stm-winusb-zadig-bootloaders-and-other-firmware-flashing-issues-on-windows">This Guide</a> on how to install the generic libusb driver</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dfu-util <span class="nt">-l</span>
</code></pre></div></div> <p>you should see something like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dfu-util 0.9

Copyright 2005-2009 Weston Schmidt, Harald Welte and OpenMoko Inc.
Copyright 2010-2016 Tormod Volden and Stefan Schmidt
This program is Free Software and has ABSOLUTELY NO WARRANTY
Please report bugs to http://sourceforge.net/p/dfu-util/tickets/

Found DFU: [feed:6969] ver=0200, devnum=4, cfg=1, intf=0, path="1-12", alt=0, name="UNKNOWN", serial="604"
</code></pre></div></div> <p>Then you can flash the firmware by using</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dfu-util <span class="nt">-d</span> feed:6969 <span class="nt">-D</span> kemove_snowfox_default.bin
</code></pre></div></div> <p>If you run into any error, please try connecting the keyboard directly to the computer without any HUB etc. Or just try a few times. Remeber to unplug / replug (while holding esc) between tries.</p> <p>Once it is done, you board should be running QMK. (you might need to unplug / replug) for it to boot QMK. The auto boot works most of the time but occasionally seems buggy.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
